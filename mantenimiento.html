<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Redirección — comprobando estado</title>
  <style>
    body{font-family:Segoe UI,system-ui,sans-serif;display:flex;align-items:center;justify-content:center;height:100vh;margin:0;background:linear-gradient(135deg,#fff3cd,#ffe5ec);color:#333;text-align:center}
    .box{background:white;padding:1.5rem;border-radius:12px;box-shadow:0 6px 18px rgba(0,0,0,0.12);max-width:420px}
    a{color:#ff6f91;font-weight:700;text-decoration:none}
  </style>
</head>
<body>
  <div class="box">
    <h2>🔄 Comprobando estado del sitio…</h2>
    <p id="msg">Un momento por favor...</p>
    <p style="font-size:0.9rem;color:#666">Si no pasa nada, revisa estos enlaces:</p>
    <p><a href="home.html">Página principal</a> · <a href="mantenimiento.html">Página de mantenimiento</a></p>
  </div>

  <script>
    (async function(){
      const msg = document.getElementById('msg');
      try {
        const res = await fetch('maintenance.json?nocache=' + Date.now());
        if (!res.ok) {
          msg.textContent = "⚠️ No se encontró 'maintenance.json'. Se abrirá la página principal.";
          window.location.href = "home.html";
          return;
        }
        const cfg = await res.json();
        if (cfg.active === true) {
          msg.textContent = "💖 Sitio en mantenimiento. Redirigiendo...";
          setTimeout(()=>window.location.href = "mantenimiento.html", 1500);
        } else {
          msg.textContent = "✨ Sitio activo. Redirigiendo...";
          setTimeout(()=>window.location.href = "home.html", 1500);
        }
      } catch (err) {
        console.error(err);
        msg.textContent = "❌ Error leyendo 'maintenance.json'. Abriendo página principal.";
        setTimeout(()=>window.location.href = "home.html", 2000);
      }
    })();
  </script>
</body>
</html>
